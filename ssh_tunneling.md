# ssh 터널링

간혹 기업은 편의를 위해서 일부 서버 하나를 몰래 내부와 연결해 놓는 경우가 있습니다.
이때 ssh 터널링을 사용하면 결국 내부를 들여다 볼 수 있게됩니다.

ssh를 이용하여 A서버를 경유, 내부 B서버의 `:80` 포트가 local 컴퓨터의 `:80` 서비스가 되도록 쉽게 만들어보겠습니다.
- `:80` 포트는 관리자만 열 수 있기 때문에 `sudo`를 사용했습니다.
- 이해를 돕기 위해서 A서버는 IP는 `10.10.10.10`, B서버의 IP는 `20.20.20.20` 으로 설정했습니다.
```
$ sudo ssh -f root@10.10.10.10 -L 80:20.20.20.20:80 -N
```

이때 암호를 두번 물어보게 됩니다. 한번은 자신의 컴퓨터의 Root 암호, 또 한번은 A서버의 Root 암호를 입력하게 됩니다.
올바르게 입력했다면, 브라우저를 띄우고 `http://localhost` 해보세요.

만약 서비스를 여러개 localhost에서 실행하고 싶다면 포트만 계속 늘리면 됩니다.
- 내부 C서버 IP `30.30.30.30` 의 `:80` 서비스를 localhost로 연결하고 싶다면 아래처럼 추가하면 되겠습니다.
```
ssh -f root@10.10.10.10 -L 8082:30.30.30.30:80 -N"
```

접속은 `http://localhost:8082` 로 하면 되겠습니다.
